<%- include('partials/header') %>
<body>
  <%- include('partials/navbar') %>

  <main class="main" role="main">
    <div class="container">

      <!-- token CSRF dispon√≠vel para o JS (se a rota fornecer csrfToken) -->
      <% if (typeof csrfToken !== 'undefined') { %>
        <meta name="csrf-token" content="<%= csrfToken %>">
      <% } %>

      <div style="margin-bottom: 2rem;">
        <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">Novo Recado</h1>
        <p style="color: var(--text-secondary);">Registre uma nova liga√ß√£o ou recado</p>
      </div>

      <div style="max-width: 800px;">
        <form id="formNovoRecado" class="card">
          <div class="card-header">
            <h2 class="card-title">Informa√ß√µes do Recado</h2>
            <p class="card-subtitle">Preencha todos os campos obrigat√≥rios</p>
          </div>

          <div class="card-body">
            <fieldset style="border: 1px solid var(--border-light); border-radius: var(--radius); padding: 1.5rem; margin-bottom: 2rem;">
              <legend style="padding: 0 0.5rem; font-weight: 600; color: var(--text-primary);">üìû Dados da Liga√ß√£o</legend>
              <div class="form-grid-2">
                <div class="form-group">
                  <label for="call_date" class="form-label required">Data da Liga√ß√£o</label>
                  <input id="call_date" name="call_date" type="date" class="form-input" required data-label="Data da liga√ß√£o" autocomplete="bday" />
                </div>
                <div class="form-group">
                  <label for="call_time" class="form-label required">Hora da Liga√ß√£o</label>
                  <input id="call_time" name="call_time" type="time" class="form-input" required data-label="Hora da liga√ß√£o" autocomplete="off" />
                </div>
              </div>

              <div class="form-group">
                <label for="recipient" class="form-label required">Destinat√°rio</label>
                <input id="recipient" name="recipient" type="text" class="form-input" placeholder="Nome da pessoa ou setor que deve receber o recado" required data-label="Destinat√°rio" autocomplete="organization" />
                <div class="form-help">Pessoa ou setor respons√°vel por receber esta mensagem</div>
              </div>
            </fieldset>

            <fieldset style="border: 1px solid var(--border-light); border-radius: var(--radius); padding: 1.5rem; margin-bottom: 2rem;">
              <legend style="padding: 0 0.5rem; font-weight: 600; color: var(--text-primary);">üë§ Dados do Remetente</legend>
              <div class="form-group">
                <label for="sender_name" class="form-label required">Nome do Remetente</label>
                <input id="sender_name" name="sender_name" type="text" class="form-input" placeholder="Nome completo de quem ligou" required data-label="Nome do remetente" autocomplete="name" />
              </div>
              <div class="form-grid-2">
                <div class="form-group">
                  <label for="sender_phone" class="form-label">Telefone</label>
                  <input id="sender_phone" name="sender_phone" type="tel" class="form-input" placeholder="(11) 99999-9999" autocomplete="tel" />
                  <div class="form-help">Telefone para retorno (opcional)</div>
                </div>
                <div class="form-group">
                  <label for="sender_email" class="form-label">E-mail</label>
                  <input id="sender_email" name="sender_email" type="email" class="form-input" placeholder="email@exemplo.com" autocomplete="email" />
                  <div class="form-help">E-mail para contato (opcional)</div>
                </div>
              </div>
              <div class="form-group">
                <label for="callback_time" class="form-label">Hor√°rio para Retorno</label>
                <input id="callback_time" name="callback_time" type="text" class="form-input" placeholder="Ex: Das 9h √†s 17h, Ap√≥s 14h, etc." autocomplete="off" />
                <div class="form-help">Melhor hor√°rio para retornar a liga√ß√£o (opcional)</div>
              </div>
            </fieldset>

            <fieldset style="border: 1px solid var(--border-light); border-radius: var(--radius); padding: 1.5rem; margin-bottom: 2rem;">
              <legend style="padding: 0 0.5rem; font-weight: 600; color: var(--text-primary);">üìù Conte√∫do do Recado</legend>
              <div class="form-group">
                <label for="subject" class="form-label required">Assunto</label>
                <input id="subject" name="subject" type="text" class="form-input" placeholder="Resumo do motivo da liga√ß√£o" required data-label="Assunto" autocomplete="off" />
                <div class="form-help">Descreva brevemente o motivo da liga√ß√£o</div>
              </div>
              <div class="form-group">
                <label for="notes" class="form-label">Observa√ß√µes</label>
                <textarea id="notes" name="notes" class="form-textarea" rows="4" placeholder="Detalhes adicionais, contexto ou informa√ß√µes importantes sobre o recado..." autocomplete="off"></textarea>
                <div class="form-help">Informa√ß√µes adicionais que possam ser √∫teis (opcional)</div>
              </div>
              <div class="form-group">
                <label for="status" class="form-label">Situa√ß√£o Inicial</label>
                <select id="status" name="status" class="form-select" autocomplete="off">
                  <option value="pending">Pendente</option>
                  <option value="in_progress">Em Andamento</option>
                  <option value="resolved">Resolvido</option>
                </select>
                <div class="form-help">Status atual do recado</div>
              </div>
            </fieldset>
          </div>

          <div class="card-footer">
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <a href="/recados" class="btn btn-outline">Cancelar</a>
              <button type="submit" class="btn btn-primary" id="btnSalvar">
                üíæ Salvar Recado
              </button>
            </div>
          </div>
        </form>
      </div>

    </div>
  </main>

  <%- include('partials/footer', { scripts: ['/js/novo-recado.js'] }) %>

