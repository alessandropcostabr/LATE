# .env.example — base única (copie para `.env` e ajuste)

# =========================
# App
# =========================
NODE_ENV=production
HOST=0.0.0.0
PORT=3100
TRUST_PROXY=1
APP_BASE_URL=https://late.miahchat.com/
APP_VERSION=2.0.0
APP_BUILD=local

# =========================
# Sessão
# =========================
SESSION_SECRET=troque-este-segredo
SESSION_TABLE=sessions
SESSION_SCHEMA=public
SESSION_MAX_AGE=604800000
COOKIE_NAME=late.sid

# =========================
# Banco de Dados PostgreSQL
# =========================
DB_DRIVER=pg
PGHOST=127.0.0.1        # Produção: VIP 192.168.15.250
PGPORT=5432
PGUSER=late_app
PGPASSWORD=sua_senha
PGDATABASE=late_prod
PG_SSL=0
PGSSLMODE=disable

# =========================
# CORS
# =========================
CORS_ORIGINS=https://late.miahchat.com,http://localhost:3000

# =========================
# Telefonia / Asterisk
# =========================
TELEPHONY_BEARER=defina-bearer
TELEPHONY_HMAC_SECRET=defina-hmac
TELEPHONY_ALLOWLIST=192.168.0.254/32
TELEPHONY_PROCESS_BATCH=50
TELEPHONY_PROCESS_INTERVAL_MS=3000
DISABLE_TELEPHONY_PROCESSOR=0

# =========================
# Intake / Automations
# =========================
INTAKE_TOKEN=troque-este-token
INTAKE_TOKEN_PEPPER=troque-este-pepper
INTAKE_TOKEN_EXPIRES_AT=2099-12-31T23:59:59Z
INTAKE_RATE_LIMIT=20
INTAKE_RATE_WINDOW_MS=60000
INTAKE_REQUIRE_CSRF=1

# =========================
# E-mail
# =========================
MAIL_DEBUG=0
MAIL_DRIVER=smtp
SMTP_HOST=smtp.seu-provedor.com
SMTP_PORT=465
SMTP_SECURE=1
SMTP_USER=late@seu-dominio.com
SMTP_PASS='troque-senha-mail'
SMTP_FROM="LATE <late@seu-dominio.com>"

# =========================
# Fallback / Diagnóstico
# =========================
REPORT_INCIDENT_MAX_PER_IP=3
REPORT_INCIDENT_MAX_PER_SESSION=5
REPORT_INCIDENT_WINDOW_MS=3600000
DARKSTAR_DIAGNOSTIC_URL=http://192.168.0.254:8888/trigger-diagnostic
DARKSTAR_DIAGNOSTIC_TOKEN=troque-este-token
DARKSTAR_DIAGNOSTIC_TIMEOUT_MS=5000

# =========================
# Scripts utilitários
# =========================
ADMIN_EMAIL=admin@late.local
ADMIN_PASSWORD=SenhaForte!123
# Redis (opcional para rate limit de incidentes)
REDIS_URL=
# ou
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
